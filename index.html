<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Da Boys NCAA League</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <script>
    const base = "https://opensheet.elk.sh/1rKNSb7t1_kLLpDn3lJEuXrzN3P1uMfAVqHQFG4hnGYM/";
  
    // Load Champions
    fetch(base + "Champions")
      .then(res => res.json())
      .then(data => {
        const target = document.getElementById("championsList");
        data.slice(-3).reverse().forEach(row => {
          const li = document.createElement("li");
          li.textContent = `${row.Year} – ${row.Winner} (${row.Record})`;
          target.appendChild(li);
        });
      });
  
    // Load Heisman
    fetch(base + "Heisman")
      .then(res => res.json())
      .then(data => {
        const target = document.getElementById("heismanList");
        data.slice(-3).reverse().forEach(row => {
          const li = document.createElement("li");
          li.textContent = `${row.Year} – ${row.Player} (${row.Team})`;
          target.appendChild(li);
        });
      });
  
    // Load Coaches
    fetch(base + "Coaches")
      .then(res => res.json())
      .then(data => {
        const target = document.getElementById("recordsList");
        data.forEach(row => {
          const li = document.createElement("li");
          li.textContent = `${row.Coach} – ${row.Wins}-${row.Losses} (${row.Titles} Titles)`;
          target.appendChild(li);
        });
      });
  
    // Load Recruiting
    fetch(base + "Recruiting")
      .then(res => res.json())
      .then(data => {
        const target = document.getElementById("recruitingList");
        data.forEach(row => {
          const li = document.createElement("li");
          li.textContent = `${row.Rank}. ${row.Team} - 5 Stars: ${row["5 Stars"]}`;
          target.appendChild(li);
        });
      });
  </script>
  
  <body class="bg-gray-900 text-white font-sans min-h-screen">
    <!-- Header -->
    <header class="bg-gray-800 p-6 shadow-md">
      <h1 class="text-3xl font-bold text-center">EA College Football 26 Dynasty</h1>
    </header>

    <!-- Main Grid -->
    <main class="p-6">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 max-w-5xl mx-auto mt-8">
        <!-- Previous Champions -->
        <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
          <a href="champs.html" class="absolute inset-0 z-10" aria-label="Go to Previous Champions page"></a>
          <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
            <a href="champs.html" class="absolute inset-0 z-10" aria-label="Go to Previous Champions page"></a>
            <h2 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">Previous Champions</h2>
            <ul id="championsList" class="space-y-1 relative z-20"></ul>
          </div>
        </div>
    
        <!-- Previous Heisman Winners -->
        <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
          <a href="heisman.html" class="absolute inset-0 z-10" aria-label="Go to Heisman Winners page"></a>
          <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
            <a href="heisman.html" class="absolute inset-0 z-10" aria-label="Go to Heisman Winners page"></a>
            <h2 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">Previous Heisman Winners</h2>
            <ul id="heismanList" class="space-y-1 relative z-20"></ul>
          </div>
        </div>
    
        <!-- All-Time Records -->
        <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
          <a href="coaches.html" class="absolute inset-0 z-10" aria-label="Go to All-Time Records page"></a>
          <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
            <a href="coaches.html" class="absolute inset-0 z-10" aria-label="Go to All-Time Records page"></a>
            <h2 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">All-Time Records</h2>
            <ul id="recordsList" class="space-y-1 relative z-20"></ul>
          </div>
        </div>
    
        <!-- Current Recruiting Rank -->
        <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
          <a href="recruiting.html" class="absolute inset-0 z-10" aria-label="Go to Recruiting page"></a>
          <h2 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">Current Recruiting Rank</h2>
          <ol id="recruitingList" class="list-decimal pl-4 space-y-1 relative z-20"></ol>
        </div>
        
        <!-- User vs User -->
          <div class="relative bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition group">
            <a href="uservsuser.html" class="absolute inset-0 z-10" aria-label="Go to User vs User page"></a>
            <h2 class="text-xl font-bold mb-4 border-b border-gray-600 pb-2">User vs User</h2>
            <ul id="uvuList" class="space-y-1 relative z-20 text-sm"></ul>
          </div>
      </div>
    </main>
    
    

    <!-- Footer -->
    <footer class="bg-gray-800 p-4 text-center text-sm text-gray-400 mt-10">
      Built for the EA CFB 26 Dynasty League by Mr. Stine
    </footer>
    <script>
      (function(){
        // Set this to the correct league’s Sheet ID
        const SHEET_ID = "1YelSwe2frFL_FvB3ul8bmZrWCYyULFCZqbfx6oO_Fr4";
        const TAB = "HTH";
        const listEl = document.getElementById("uvuList");
        if (!listEl) return;
    
        const esc = s => String(s ?? "").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));
    
        fetch(`https://opensheet.elk.sh/1rKNSb7t1_kLLpDn3lJEuXrzN3P1uMfAVqHQFG4hnGYM/HTH`)
          .then(r => r.json())
          .then(rows => {
            if (!Array.isArray(rows) || rows.length === 0) {
              listEl.innerHTML = `<li class="text-gray-400">No head-to-head data yet.</li>`;
              return;
            }
            // Detect headers flexibly
            const nameKey   = ['Name','Coach','User'].find(k => k in rows[0]) || 'Name';
            const vsKey     = ['All-time versus','All time versus','Opponent','Versus'].find(k => k in rows[0]) || 'Opponent';
            const recordKey = ['Record'].find(k => k in rows[0]);
    
            // Normalize rows
            const normalized = rows.map(r => {
              const name = r[nameKey] ?? '';
              const vs   = r[vsKey] ?? '';
              let record = r[recordKey] ?? '';
              if (!record) {
                const w = r.Wins ?? r.W ?? '';
                const l = r.Losses ?? r.L ?? '';
                const t = r.Ties ?? r.T ?? '';
                record = (t !== '' && !isNaN(t)) ? `${w}–${l}–${t}` : `${w}–${l}`;
              }
              return { name, vs, record };
            }).filter(x => x.name && x.vs && x.record);
    
            // Sort and show a concise slice (change 8 to your preference)
            normalized.sort((a,b) => a.name.localeCompare(b.name) || a.vs.localeCompare(b.vs));
            const top = normalized.slice(0, 8);
    
            listEl.innerHTML = top.map(r =>
              `<li>${esc(r.name)} — vs ${esc(r.vs)} • ${esc(r.record)}</li>`
            ).join('');
          })
          .catch(err => {
            console.error("HTH fetch error:", err);
            listEl.innerHTML = `<li class="text-red-400">Couldn’t load H2H data.</li>`;
          });
      })();
    </script>
    
    
  </body>
</html>
